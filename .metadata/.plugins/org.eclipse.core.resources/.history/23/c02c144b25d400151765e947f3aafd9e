var imagesFolder = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, "images");
var imageFiles = imagesFolder.getDirectoryListing();
var pWidth = Ti.Platform.displayCaps.platformWidth;
var pHeight = Ti.Platform.displayCaps.platformHeight;
var actions = [
		{title: "Now You See Me 2", 
		description: "Sequel to the hit movie staring Jesse Eisenberg about the 4 horseman magicians. In this stunning sequel we will get to see what happens after they have completed all of their test and they are now in the secret order of magicians!",
		image: "now you see.jpg",
		actors: " Daniel Radcliffe, Lizzy Caplan, Jesse Eisenberg, Mark Ruffalo, Morgan Freeman, Woody Harrelson, Dave Franco",
		release: " Now you see me 2 is scheduled to be released to theaters on june 10, 2016!",
		director: " The director for this film is Jon M. Chu",
		budget: "The spending Budget for this film was around 200 million",
		budgetView: "55%"}, 
		{title: "Captain America, Civil War", 
		description: "In this new super hero movie Captian america gets into some trouble and it has grave consequences!",
		image: "civil war.jpg",
		actors: " these are the actors in Civil War Chris Evans, Robert Downey Jr., Scarlett Johansson, Sebastian Stan, Anthony Mackie, Paul Bettany, Jeremy Renner, Don Cheadle, Paul Rudd",
		release: " Civil War is set to hit theaters on May 10, 2016",
		director: " Anthony Russo and Joe Russo co-directed this upcoming action film",
		budget: "The spending budget for this film was 200 million",
		budgetView: "30%"}, 
		{title: "Concussion", 
		description: "Amazing true story about a man from Africa who traveled here looking to live in the land of the free and eventually became a doctor. However when he discovers brain damage problems related to football players he finds out that it goes deeper than he thought and must fight to prove whats right.",
		image: "concussion.jpg",
		actors: " these are the actors in Concussion Will Smith, Alec Baldwin, Gugu Mbatha-Raw, Arliss Howard, Paul Reiser, Luke Wilson",
		release: " Concussion will be hitting theaters everywhere this year December 25, 2015 Christmas Day!",
		director:" The director for this film was Peter Landesman",
		budget: " The spending budget for this film was around 30 million",
		budgetView: "60%"}
	];
  
var dataWindow = Ti.UI.createWindow({
		title: "Upcoming Movies",
		backgroundColor: "#9b05c1",
	});
	var dataBorder = Ti.UI.createView({
		backgroundColor: "dbdbdb",
		height: 1,
	});
	var movies = Ti.UI.createTableView({
		top: dataBorder.top + dataBorder.height,
	});
	var actionSection = Ti.UI.createTableViewSection({
		headerTitle: "Action",
		footerTitle: "2015-16"
	});
	var movieSections = [actionSection];
	movies.setData(movieSections);
	dataWindow.add(dataBorder, movies, actionSection);
	navWindow.openWindow(dataWindow);


	var getDetail = function(dataSource){
		var detailWin = Ti.UI.createWindow({
			title: dataSource.title,
			backgroundColor: "#9b05c1"
		});
	
		var detailBorder = Ti.UI.createView({
			backgroundColor: "dbdbdb",
			height: 1,
			top:0
		});
	
		var movieText = Ti.UI.createLabel({
			text: dataSource.desc,
			color: "#fff",
			font: {fontsize: 14, fontFamily: "arial", fontWeight: "regular"},
			top: detailBorder.height + detailBorder.top + 300,
			left: 10,
			right: 10
		});
		var movieImage = Ti.UI.createImageView({
			image: "images/" + dataSource.image,
			top: 0,
		});
		var budgetLabel = Ti.UI.createLabel({
			color: "#fff",
			text: dataSource.budget,
			font: {fontSize: 12, fontFamily: "arial", fontWeight: "regular"},
			top: 230,
			textAllign: "center"
		});
		var view = Ti.UI.createView({
			backgroundColor: "#fff",
			borderRadius: 10,
			borderColor: "black",
		    top: 260,
			left:"25%",
			right:"25%",
			height:30
		});
		var totalView = Ti.UI.createView({
			backgroundColor: "#000",
			borderRadius: 10,
			borderColor: "black",
			top: 260,
			left: "25%",
			right: dataSource.budgetView,
			height: 30
		});
		view.add(totalView);
		detailWin.add(detailBorder, movieText, movieImage, view, totalView, budgetLabel);
		navWindow.openWindow(detailWin);
	};
// for loop for movies and information inside the JSON object	
	for(var i=0, j = actions.length; i<j; i++){
	var theRow = Ti.UI.createTableViewRow({
		title: actions[i].title,
		desc: actions[i].description,
		image: actions[i].image,
		actors: actions[i].actors,
		budget: actions[i].budget,
		budgetView: actions[i].budgetView,
		hasChild: true
	});
	actionSection.add(theRow);
	};
	movies.addEventListener("click", function(event){
	getDetail(event.source);
});
};
